/*!
 * jQuery Form Plugin
 * version: 2.84 (12-AUG-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */(function(a){function b(){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}a.fn.ajaxSubmit=function(c){function t(e){function w(a){var b=a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document;return b}function x(){function h(){try{var a=w(n).readyState;b("state = "+a),a.toLowerCase()=="uninitialized"&&setTimeout(h,50)}catch(c){b("Server abort: ",c," (",c.name,")"),C(v),s&&clearTimeout(s),s=undefined}}var c=g.attr("target"),e=g.attr("action");f.setAttribute("target",l),d||f.setAttribute("method","POST"),e!=j.url&&f.setAttribute("action",j.url),!j.skipEncodingOverride&&(!d||/post/i.test(d))&&g.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),j.timeout&&(s=setTimeout(function(){r=!0,C(u)},j.timeout));var i=[];try{if(j.extraData)for(var k in j.extraData)i.push(a('<input type="hidden" name="'+k+'" />').attr("value",j.extraData[k]).appendTo(f)[0]);j.iframeTarget||(m.appendTo("body"),n.attachEvent?n.attachEvent("onload",C):n.addEventListener("load",C,!1)),setTimeout(h,15),f.submit()}finally{f.setAttribute("action",e),c?f.setAttribute("target",c):g.removeAttr("target"),a(i).remove()}}function C(c){if(o.aborted||B)return;try{z=w(n)}catch(d){b("cannot access response document: ",d),c=v}if(c===u&&o){o.abort("timeout");return}if(c==v&&o){o.abort("server abort");return}if(!z||z.location.href==j.iframeSrc)if(!r)return;n.detachEvent?n.detachEvent("onload",C):n.removeEventListener("load",C,!1);var e="success",f;try{if(r)throw"timeout";var g=j.dataType=="xml"||z.XMLDocument||a.isXMLDoc(z);b("isXml="+g);if(!g&&window.opera&&(z.body==null||z.body.innerHTML=="")&&--A){b("requeing onLoad callback, DOM not available"),setTimeout(C,250);return}var h=z.body?z.body:z.documentElement;o.responseText=h?h.innerHTML:null,o.responseXML=z.XMLDocument?z.XMLDocument:z,g&&(j.dataType="xml"),o.getResponseHeader=function(a){var b={"content-type":j.dataType};return b[a]},h&&(o.status=Number(h.getAttribute("status"))||o.status,o.statusText=h.getAttribute("statusText")||o.statusText);var i=j.dataType||"",l=/(json|script|text)/.test(i.toLowerCase());if(l||j.textarea){var p=z.getElementsByTagName("textarea")[0];if(p)o.responseText=p.value,o.status=Number(p.getAttribute("status"))||o.status,o.statusText=p.getAttribute("statusText")||o.statusText;else if(l){var q=z.getElementsByTagName("pre")[0],t=z.getElementsByTagName("body")[0];q?o.responseText=q.textContent?q.textContent:q.innerHTML:t&&(o.responseText=t.innerHTML)}}else j.dataType=="xml"&&!o.responseXML&&o.responseText!=null&&(o.responseXML=D(o.responseText));try{y=F(o,j.dataType,j)}catch(c){e="parsererror",o.error=f=c||e}}catch(c){b("error caught: ",c),e="error",o.error=f=c||e}o.aborted&&(b("upload aborted"),e=null),o.status&&(e=o.status>=200&&o.status<300||o.status===304?"success":"error"),e==="success"?(j.success&&j.success.call(j.context,y,"success",o),k&&a.event.trigger("ajaxSuccess",[o,j])):e&&(f==undefined&&(f=o.statusText),j.error&&j.error.call(j.context,o,e,f),k&&a.event.trigger("ajaxError",[o,j,f])),k&&a.event.trigger("ajaxComplete",[o,j]),k&&!--a.active&&a.event.trigger("ajaxStop"),j.complete&&j.complete.call(j.context,o,e),B=!0,j.timeout&&clearTimeout(s),setTimeout(function(){j.iframeTarget||m.remove(),o.responseXML=null},100)}var f=g[0],h,i,j,k,l,m,n,o,p,q,r,s,t=!!a.fn.prop;if(e)for(i=0;i<e.length;i++)h=a(f[e[i].name]),h[t?"prop":"attr"]("disabled",!1);if(a(":input[name=submit],:input[id=submit]",f).length){alert('Error: Form elements must not have name or id of "submit".');return}j=a.extend(!0,{},a.ajaxSettings,c),j.context=j.context||j,l="jqFormIO"+(new Date).getTime(),j.iframeTarget?(m=a(j.iframeTarget),q=m.attr("name"),q==null?m.attr("name",l):l=q):(m=a('<iframe name="'+l+'" src="'+j.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),n=m[0],o={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(c){var d=c==="timeout"?"timeout":"aborted";b("aborting upload... "+d),this.aborted=1,m.attr("src",j.iframeSrc),o.error=d,j.error&&j.error.call(j.context,o,d,c),k&&a.event.trigger("ajaxError",[o,j,d]),j.complete&&j.complete.call(j.context,o,d)}},k=j.global,k&&!(a.active++)&&a.event.trigger("ajaxStart"),k&&a.event.trigger("ajaxSend",[o,j]);if(j.beforeSend&&j.beforeSend.call(j.context,o,j)===!1){j.global&&a.active--;return}if(o.aborted)return;p=f.clk,p&&(q=p.name,q&&!p.disabled&&(j.extraData=j.extraData||{},j.extraData[q]=p.value,p.type=="image"&&(j.extraData[q+".x"]=f.clk_x,j.extraData[q+".y"]=f.clk_y)));var u=1,v=2;j.forceSync?x():setTimeout(x,10);var y,z,A=50,B,D=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&b.documentElement.nodeName!="parsererror"?b:null},E=a.parseJSON||function(a){return window.eval("("+a+")")},F=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f=c==="xml"||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&g.documentElement.nodeName==="parsererror"&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),typeof g=="string"&&(c==="json"||!c&&e.indexOf("json")>=0?g=E(g):(c==="script"||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g}}if(!this.length)return b("ajaxSubmit: skipping submit process - no element selected"),this;var d,e,f,g=this;typeof c=="function"&&(c={success:c}),d=this.attr("method"),e=this.attr("action"),f=typeof e=="string"?a.trim(e):"",f=f||window.location.href||"",f&&(f=(f.match(/^([^#]+)/)||[])[1]),c=a.extend(!0,{url:f,success:a.ajaxSettings.success,type:d||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},c);var h={};this.trigger("form-pre-serialize",[this,c,h]);if(h.veto)return b("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(c.beforeSerialize&&c.beforeSerialize(this,c)===!1)return b("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var i,j,k=this.formToArray(c.semantic);if(c.data){c.extraData=c.data;for(i in c.data)if(a.isArray(c.data[i]))for(var l in c.data[i])k.push({name:i,value:c.data[i][l]});else j=c.data[i],j=a.isFunction(j)?j():j,k.push({name:i,value:j})}if(c.beforeSubmit&&c.beforeSubmit(k,this,c)===!1)return b("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[k,this,c,h]);if(h.veto)return b("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var m=a.param(k);c.type.toUpperCase()=="GET"?(c.url+=(c.url.indexOf("?")>=0?"&":"?")+m,c.data=null):c.data=m;var n=[];c.resetForm&&n.push(function(){g.resetForm()}),c.clearForm&&n.push(function(){g.clearForm()});if(!c.dataType&&c.target){var o=c.success||function(){};n.push(function(b){var d=c.replaceTarget?"replaceWith":"html";a(c.target)[d](b).each(o,arguments)})}else c.success&&n.push(c.success);c.success=function(a,b,d){var e=c.context||c;for(var f=0,h=n.length;f<h;f++)n[f].apply(e,[a,b,d||g,g])};var p=a("input:file",this).length>0,q="multipart/form-data",r=g.attr("enctype")==q||g.attr("encoding")==q;if(c.iframe!==!1&&(p||c.iframe||r))c.closeKeepAlive?a.get(c.closeKeepAlive,function(){t(k)}):t(k);else{if(a.browser.msie&&d=="get"){var s=g[0].getAttribute("method");typeof s=="string"&&(c.type=s)}a.ajax(c)}return this.trigger("form-submit-notify",[this,c]),this},a.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};return!a.isReady&&d.s?(b("DOM not ready, queuing ajaxForm"),a(function(){a(d.s,d.c).ajaxForm(c)}),this):(b("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){b.isDefaultPrevented()||(b.preventDefault(),a(this).ajaxSubmit(c))}).bind("click.form-plugin",function(b){var c=b.target,d=a(c);if(!d.is(":submit,input:image")){var e=d.closest(":submit");if(e.length==0)return;c=e[0]}var f=this;f.clk=c;if(c.type=="image")if(b.offsetX!=undefined)f.clk_x=b.offsetX,f.clk_y=b.offsetY;else if(typeof a.fn.offset=="function"){var g=d.offset();f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top}else f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop;setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)})},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b){var c=[];if(this.length===0)return c;var d=this[0],e=b?d.getElementsByTagName("*"):d.elements;if(!e)return c;var f,g,h,i,j,k,l;for(f=0,k=e.length;f<k;f++){j=e[f],h=j.name;if(!h)continue;if(b&&d.clk&&j.type=="image"){!j.disabled&&d.clk==j&&(c.push({name:h,value:a(j).val()}),c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y}));continue}i=a.fieldValue(j,!0);if(i&&i.constructor==Array)for(g=0,l=i.length;g<l;g++)c.push({name:h,value:i[g]});else i!==null&&typeof i!="undefined"&&c.push({name:h,value:i})}if(!b&&d.clk){var m=a(d.clk),n=m[0];h=n.name,h&&!n.disabled&&n.type=="image"&&(c.push({name:h,value:m.val()}),c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y}))}return c},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var d=this.name;if(!d)return;var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;f<g;f++)c.push({name:d,value:e[f]});else e!==null&&typeof e!="undefined"&&c.push({name:this.name,value:e})}),a.param(c)},a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;d<e;d++){var f=this[d],g=a.fieldValue(f,b);if(g===null||typeof g=="undefined"||g.constructor==Array&&!g.length)continue;g.constructor==Array?a.merge(c,g):c.push(g)}return c},a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();c===undefined&&(c=!0);if(c&&(!d||b.disabled||e=="reset"||e=="button"||(e=="checkbox"||e=="radio")&&!b.checked||(e=="submit"||e=="image")&&b.form&&b.form.clk!=b||f=="select"&&b.selectedIndex==-1))return null;if(f=="select"){var g=b.selectedIndex;if(g<0)return null;var h=[],i=b.options,j=e=="select-one",k=j?g+1:i.length;for(var l=j?g:0;l<k;l++){var m=i[l];if(m.selected){var n=m.value;n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value);if(j)return n;h.push(n)}}return h}return a(b).val()},a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})},a.fn.clearFields=a.fn.clearInputs=function(){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var b=this.type,c=this.tagName.toLowerCase();a.test(b)||c=="textarea"?this.value="":b=="checkbox"||b=="radio"?this.checked=!1:c=="select"&&(this.selectedIndex=-1)})},a.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return a===undefined&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return b===undefined&&(b=!0),this.each(function(){var c=this.type;if(c=="checkbox"||c=="radio")this.checked=b;else if(this.tagName.toLowerCase()=="option"){var d=a(this).parent("select");b&&d[0]&&d[0].type=="select-one"&&d.find("option").selected(!1),this.selected=b}})}})(jQuery),function(a,b,c){var d="watermark",e="watermarkClass",f="watermarkFocus",g="watermarkSubmit",h="watermarkMaxLength",i="watermarkPassword",j="watermarkText",k=/\r/g,l="input:data("+d+"),textarea:data("+d+")",m="input:text,input:password,input[type=search],input:not([type]),textarea",n=["Page_ClientValidate"],o=!1,p="placeholder"in document.createElement("input");a.watermark=a.watermark||{version:"3.1.3",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(b){a(b).filter(l).each(function(){a.watermark._hide(a(this))})},_hide:function(a,c){var d=a[0],f=(d.value||"").replace(k,""),g=a.data(j)||"",l=a.data(h)||0,m=a.data(e);if(g.length&&f==g){d.value="";if(a.data(i)&&(a.attr("type")||"")==="text"){var n=a.data(i)||[],o=a.parent()||[];n.length&&o.length&&(o[0].removeChild(a[0]),o[0].appendChild(n[0]),a=n)}l&&(a.attr("maxLength",l),a.removeData(h)),c&&(a.attr("autocomplete","off"),b.setTimeout(function(){a.select()},1))}m&&a.removeClass(m)},show:function(b){a(b).filter(l).each(function(){a.watermark._show(a(this))})},_show:function(b){var c=b[0],d=(c.value||"").replace(k,""),g=b.data(j)||"",l=b.attr("type")||"",m=b.data(e);if(d.length!=0&&d!=g||!!b.data(f))a.watermark._hide(b);else{o=!0;if(b.data(i)&&l==="password"){var n=b.data(i)||[],p=b.parent()||[];n.length&&p.length&&(p[0].removeChild(b[0]),p[0].appendChild(n[0]),b=n,b.attr("maxLength",g.length),c=b[0])}if(l==="text"||l==="search"){var q=b.attr("maxLength")||0;q>0&&g.length>q&&(b.data(h,q),b.attr("maxLength",g.length))}m&&b.addClass(m),c.value=g}},hideAll:function(){o&&(a.watermark.hide(m),o=!1)},showAll:function(){a.watermark.show(m)}},a.fn.watermark=a.fn.watermark||function(c,h){if(!this.length)return this;var l=!1,n=typeof c=="string";return n&&(c=c.replace(k,"")),typeof h=="object"?(l=typeof h.className=="string",h=a.extend({},a.watermark.options,h)):typeof h=="string"?(l=!0,h=a.extend({},a.watermark.options,{className:h})):h=a.watermark.options,typeof h.useNative!="function"&&(h.useNative=h.useNative?function(){return!0}:function(){return!1}),this.each(function(){var o=a(this);if(!o.is(m))return;if(o.data(d)){if(n||l)a.watermark._hide(o),n&&o.data(j,c),l&&o.data(e,h.className)}else{if(p&&h.useNative.call(this,o)&&(o.attr("tagName")||"")!=="TEXTAREA"){n&&o.attr("placeholder",c);return}o.data(j,n?c:""),o.data(e,h.className),o.data(d,1);if((o.attr("type")||"")==="password"){var q=o.wrap("<span>").parent(),r=a(q.html().replace(/type=["']?password["']?/i,'type="text"'));r.data(j,o.data(j)),r.data(e,o.data(e)),r.data(d,1),r.attr("maxLength",c.length),r.focus(function(){a.watermark._hide(r,!0)}).bind("dragenter",function(){a.watermark._hide(r)}).bind("dragend",function(){b.setTimeout(function(){r.blur()},1)}),o.blur(function(){a.watermark._show(o)}).bind("dragleave",function(){a.watermark._show(o)}),r.data(i,o),o.data(i,r)}else o.focus(function(){o.data(f,1),a.watermark._hide(o,!0)}).blur(function(){o.data(f,0),a.watermark._show(o)}).bind("dragenter",function(){a.watermark._hide(o)}).bind("dragleave",function(){a.watermark._show(o)}).bind("dragend",function(){b.setTimeout(function(){a.watermark._show(o)},1)}).bind("drop",function(a){var b=o[0],c=a.originalEvent.dataTransfer.getData("Text");(b.value||"").replace(k,"").replace(c,"")===o.data(j)&&(b.value=c),o.focus()});if(this.form){var s=this.form,t=a(s);t.data(g)||(t.submit(a.watermark.hideAll),s.submit?(t.data(g,s.submit),s.submit=function(b,c){return function(){var d=c.data(g);a.watermark.hideAll(),d.apply?d.apply(b,Array.prototype.slice.call(arguments)):d()}}(s,t)):(t.data(g,1),s.submit=function(b){return function(){a.watermark.hideAll(),delete b.submit,b.submit()}}(s)))}}a.watermark._show(o)})},a.watermark.runOnce&&(a.watermark.runOnce=!1,a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])}}),function(b){a.fn.val=function(){if(!this.length)return arguments.length?this:c;if(!arguments.length){if(this.data(d)){var e=(this[0].value||"").replace(k,"");return e===(this.data(j)||"")?"":e}return b.apply(this,arguments)}return b.apply(this,arguments),a.watermark.show(this),this}}(a.fn.val),n.length&&a(function(){var c,d,e;for(c=n.length-1;c>=0;c--)d=n[c],e=b[d],typeof e=="function"&&(b[d]=function(b){return function(){return a.watermark.hideAll(),b.apply(null,Array.prototype.slice.call(arguments))}}(e))}),a(b).bind("beforeunload",function(){a.watermark.options.hideBeforeUnload&&a.watermark.hideAll()}))}(jQuery,window),function(){(function(a){return a.widget("IKS.halloformat",{options:{editable:null,toolbar:null,uuid:"",formattings:{bold:!0,italic:!0,strikeThrough:!0,underline:!0}},_create:function(){var b,c,d,e,f,g,h=this;f=this,c=a('<span class="'+f.widgetName+'"></span>'),b=function(b){var d,e,g,i,j;return i=b.substr(0,1).toUpperCase(),g=""+h.options.uuid+"-"+b,c.append(a('<input id="'+g+'" type="checkbox" /><label for="'+g+'" class="'+b+'_button">'+i+"</label>").button()),d=a("#"+g,c),d.attr("hallo-command",b),d.addClass(b),d.bind("change",function(c){return b=a(this).attr("hallo-command"),f.options.editable.execute(b)}),j=function(a){return document.queryCommandState(b)?(d.attr("checked",!0),d.next("label").addClass("ui-state-clicked"),d.button("refresh")):(d.attr("checked",!1),d.next("label").removeClass("ui-state-clicked"),d.button("refresh"))},e=h.element,h.element.bind("halloenabled",function(){return e.bind("keyup paste change mouseup",j)}),h.element.bind("hallodisabled",function(){return e.unbind("keyup paste change mouseup",j)})},g=this.options.formattings;for(e in g)d=g[e],d&&b(e);return c.buttonset(),this.options.toolbar.append(c)},_init:function(){}})})(jQuery),function(a){return a.widget("IKS.hallo",{toolbar:null,bound:!1,originalContent:"",uuid:"",selection:null,options:{editable:!0,plugins:{},floating:!0,offset:{x:0,y:0},showAlways:!1,activated:function(){},deactivated:function(){},selected:function(){},unselected:function(){},enabled:function(){},disabled:function(){},placeholder:""},_create:function(){var b,c,d,e;this.originalContent=this.getContents(),this.id=this._generateUUID(),this._prepareToolbar(),d=this.options.plugins,e=[];for(c in d)b=d[c],a.isPlainObject(b)||(b={}),b.editable=this,b.toolbar=this.toolbar,b.uuid=this.id,e.push(a(this.element)[c](b));return e},_init:function(){return this.options.editable?this.enable():this.disable()},disable:function(){return this.element.attr("contentEditable",!1),this.element.unbind("focus",this._activated),this.element.unbind("blur",this._deactivated),this.element.unbind("keyup paste change",this._checkModified),this.element.unbind("keyup",this._keys),this.element.unbind("keyup mouseup",this._checkSelection),this.bound=!1,this._trigger("disabled",null)},enable:function(){var a;return this.element.attr("contentEditable",!0),this.element.html()||this.element.html(this.options.placeholder),this.bound||(this.element.bind("focus",this,this._activated),this.options.showAlways||this.element.bind("blur",this,this._deactivated),this.element.bind("keyup paste change",this,this._checkModified),this.element.bind("keyup",this,this._keys),this.element.bind("keyup mouseup",this,this._checkSelection),a=this,this.bound=!0),this._trigger("enabled",null)},activate:function(){return this.element.focus()},getSelection:function(){var b,c;if(a.browser.msie)b=document.selection.createRange();else{if(window.getSelection)c=window.getSelection();else{if(!document.selection)throw"Your browser does not support selection handling";c=document.selection.createRange()}c.rangeCount>0?b=c.getRangeAt(0):b=c}return b},restoreSelection:function(b){return a.browser.msie?b.select():(window.getSelection().removeAllRanges(),window.getSelection().addRange(b))},replaceSelection:function(b){var c,d,e,f,g;return a.browser.msie?(g=document.selection.createRange().text,d=document.selection.createRange(),d.pasteHTML(b(g))):(f=window.getSelection(),e=f.getRangeAt(0),c=document.createTextNode(b(e.extractContents())),e.insertNode(c),e.setStartAfter(c),f.removeAllRanges(),f.addRange(e))},removeAllSelections:function(){return a.browser.msie?range.empty():window.getSelection().removeAllRanges()},getContents:function(){return this.element.html()},setContents:function(a){return this.element.html(a)},isModified:function(){return this.originalContent!==this.getContents()},setUnmodified:function(){return this.originalContent=this.getContents()},restoreOriginalContent:function(){return this.element.html(this.originalContent)},execute:function(a,b){if(document.execCommand(a,!1,b))return this.element.trigger("change")},_generateUUID:function(){var a;return a=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},""+a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},_getToolbarPosition:function(a,b){var c;if(!a)return;if(!this.options.floating)return c=parseFloat(this.element.css("outline-width"))+parseFloat(this.element.css("outline-offset")),{top:this.element.offset().top-this.toolbar.outerHeight()-c,left:this.element.offset().left-c};if(a.originalEvent instanceof KeyboardEvent)return this._getCaretPosition(b);if(a.originalEvent instanceof MouseEvent)return{top:a.pageY,left:a.pageX}},_getCaretPosition:function(b){var c,d,e;return e=a("<span/>"),c=document.createRange(),c.setStart(b.endContainer,b.endOffset),c.insertNode(e.get(0)),d={top:e.offset().top,left:e.offset().left},e.remove(),d},_prepareToolbar:function(){var b;return b=this,this.toolbar=a('<div class="hallotoolbar"></div>').hide(),this.toolbar.css("position","absolute"),this.toolbar.css("top",this.element.offset().top-20),this.toolbar.css("left",this.element.offset().left),a("body").append(this.toolbar),this.toolbar.bind("mousedown",function(a){return a.preventDefault()}),this.options.showAlways?(this.options.floating=!1,this.element.bind("halloactivated",function(a,c){return b._updateToolbarPosition(b._getToolbarPosition(a)),b.toolbar.show()}),this.element.bind("hallodeactivated",function(a,c){return b.toolbar.hide()})):(this.element.bind("halloselected",function(a,c){var d,e;e=c.editable,d=e._getToolbarPosition(c.originalEvent,c.selection);if(d)return b._updateToolbarPosition(d),b.toolbar.show()}),this.element.bind("hallounselected",function(a,b){return b.editable.toolbar.hide()})),a(window).resize(function(a){return b._updateToolbarPosition(b._getToolbarPosition(a))})},_updateToolbarPosition:function(a){return this.toolbar.css("top",a.top),this.toolbar.css("left",a.left)},_checkModified:function(a){var b;b=a.data;if(b.isModified())return b._trigger("modified",null,{editable:b,content:b.getContents()})},_keys:function(a){var b;b=a.data;if(a.keyCode===27)return b.restoreOriginalContent(),b.turnOff()},_rangesEqual:function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},_checkSelection:function(a){var b;if(a.keyCode===27)return;return b=a.data,setTimeout(function(){var c;c=b.getSelection();if(b._isEmptySelection(c)||b._isEmptyRange(c)){b.selection&&(b.selection=null,b._trigger("unselected",null,{editable:b,originalEvent:a}));return}if(!b.selection||!b._rangesEqual(c,b.selection))return b.selection=c.cloneRange(),b._trigger("selected",null,{editable:b,selection:b.selection,ranges:[b.selection],originalEvent:a})},0)},_isEmptySelection:function(a){return a.type==="Caret"?!0:!1},_isEmptyRange:function(a){return a.collapsed?!0:a.isCollapsed?a.isCollapsed():!1},turnOn:function(){var b,c;return this.getContents()===this.options.placeholder&&this.setContents(""),a(this.element).addClass("inEditMode"),this.options.floating?this.toolbar.css("width","auto"):(b=a(this.element),c=parseFloat(b.css("padding-left")),c+=parseFloat(b.css("padding-right")),c+=parseFloat(b.css("border-left-width")),c+=parseFloat(b.css("border-right-width")),c+=parseFloat(b.css("outline-width"))*2,c+=parseFloat(b.css("outline-offset"))*2,a(this.toolbar).css("width",b.width()+c)),this._trigger("activated",this)},turnOff:function(){this.toolbar.hide(),a(this.element).removeClass("inEditMode"),this.options.showAlways&&this.element.blur(),this._trigger("deactivated",this);if(!this.getContents())return this.setContents(this.options.placeholder)},_activated:function(a){return a.data.turnOn()},_deactivated:function(a){return a.data.turnOff()}})}(jQuery),function(a){return a.widget("IKS.halloheadings",{options:{editable:null,toolbar:null,uuid:"",headers:[1,2,3]},_create:function(){var b,c,d,e,f,g,h,i,j,k,l=this;h=this,d=a('<span class="'+h.widgetName+'"></span>'),f=""+this.options.uuid+"-paragraph",g="P",d.append(a('<input id="'+f+'" type="radio" name="'+h.options.uuid+'-headings"/><label for="'+f+'" class="p_button">'+g+"</label>").button()),b=a("#"+f,d),b.attr("hallo-command","formatBlock"),b.bind("change",function(b){var c;return c=a(this).attr("hallo-command"),h.options.editable.execute(c,"P")}),c=function(c){return g="H"+c,f=""+l.options.uuid+"-"+c,d.append(a('<input id="'+f+'" type="radio" name="'+h.options.uuid+'-headings"/><label for="'+f+'" class="h'+c+'_button">'+g+"</label>").button()),b=a("#"+f,d),b.attr("hallo-size","H"+c),b.bind("change",function(b){var c;return c=a(this).attr("hallo-size"),h.options.editable.execute("formatBlock",c)})},k=this.options.headers;for(i=0,j=k.length;i<j;i++)e=k[i],c(e);return d.buttonset(),this.element.bind("keyup paste change mouseup",function(b){var c,e,f,g,i;try{c=document.queryCommandValue("formatBlock").toUpperCase()}catch(j){c=""}if(c==="P")i=a("#"+h.options.uuid+"-paragraph");else if(g=c.match(/\d/))e=g[0],i=a("#"+h.options.uuid+"-"+e);f=a(d),f.children("input").attr("checked",!1),f.children("label").removeClass("ui-state-clicked"),f.children("input").button("widget").button("refresh");if(i)return i.attr("checked",!0),i.next("label").addClass("ui-state-clicked"),i.button("refresh")}),this.options.toolbar.append(d)},_init:function(){}})}(jQuery),function(a){return a.widget("Liip.halloimage",{options:{editable:null,toolbar:null,uuid:"",limit:8,search:null,suggestions:null,loaded:null,upload:null,uploadUrl:null,dialogOpts:{autoOpen:!1,width:270,height:"auto",title:"Insert Images",modal:!1,resizable:!1,draggable:!0,dialogClass:"halloimage-dialog",close:function(b,c){return a(".image_button").removeClass("ui-state-clicked")}},dialog:null},_create:function(){var b,c,d,e,f;return f=this,d=""+this.options.uuid+"-image-dialog",this.options.dialog=a('<div id="'+d+'">                <div class="nav">                    <ul class="tabs">                    </ul>                    <div id="'+this.options.uuid+'-tab-activeIndicator" class="tab-activeIndicator" />                </div>                <div class="dialogcontent">            </div>'),f.options.uploadUrl&&!f.options.upload&&(f.options.upload=f._iframeUpload),f.options.suggestions&&this._addGuiTabSuggestions(a(".tabs",this.options.dialog),a(".dialogcontent",this.options.dialog)),f.options.search&&this._addGuiTabSearch(a(".tabs",this.options.dialog),a(".dialogcontent",this.options.dialog)),f.options.upload&&this._addGuiTabUpload(a(".tabs",this.options.dialog),a(".dialogcontent",this.options.dialog)),c=a('<span class="'+f.widgetName+'"></span>'),e=""+this.options.uuid+"-image",c.append(a('<input id="'+e+'" type="checkbox" /><label for="'+e+'" class="image_button" >Image</label>').button()),b=a("#"+e,c),b.bind("change",function(a){return f.options.dialog.dialog("isOpen")?f._closeDialog():f._openDialog()}),this.options.editable.element.bind("hallodeactivated",function(a){return f._closeDialog()}),a(this.options.editable.element).delegate("img","click",function(a){return f._openDialog()}),a(this.options.dialog).find(".nav li").click(function(){return a("."+f.widgetName+"-tab").each(function(){return a(this).hide()}),e=a(this).attr("id"),a("#"+e+"-content").show(),a("#"+f.options.uuid+"-tab-activeIndicator").css("margin-left",a(this).position().left+a(this).width()/2)}),a("."+f.widgetName+"-tab .imageThumbnail").live("click",function(b){var c;return c=a(this).closest("."+f.widgetName+"-tab"),a(".imageThumbnail",c).removeClass("imageThumbnailActive"),a(this).addClass("imageThumbnailActive"),a(".activeImage",c).attr("src",a(this).attr("src")),a(".activeImageBg",c).attr("src",a(this).attr("src"))}),c.buttonset(),this.options.toolbar.append(c),this.options.dialog.dialog(this.options.dialogOpts),this._addDragnDrop()},_init:function(){},_openDialog:function(){var b,c,d,e,f,g,h,i,j,k,l,m;k=this,c=function(){return window.setTimeout(function(){var b;return b=a(".imageThumbnail"),a(b).each(function(){var b;b=a("#"+this.id).width();if(b<=20)return a("#"+this.id).parent("li").remove()})},15e3)},e=!1,f=function(b){a.each(b.assets,function(b,c){return a(".imageThumbnailContainer ul").append('<li><img src="'+c.url+'" class="imageThumbnail"></li>'),e=!0});if(b.assets.length>0)return a("#activitySpinner").hide()},a(".image_button").addClass("ui-state-clicked"),a("#"+this.options.uuid+"-sugg-activeImage").attr("src",a("#"+this.options.uuid+"-tab-suggestions-content .imageThumbnailActive").first().attr("src")),a("#"+this.options.uuid+"-sugg-activeImageBg").attr("src",a("#"+this.options.uuid+"-tab-suggestions-content .imageThumbnailActive").first().attr("src")),this.lastSelection=this.options.editable.getSelection(),l=a(this.options.editable.element).offset().left+a(this.options.editable.element).outerWidth()-3,m=a(this.options.toolbar).offset().top-a(document).scrollTop()-29,this.options.dialog.dialog("option","position",[l,m]);if(k.options.loaded===null&&k.options.suggestions){b=[],a("#activitySpinner").show(),i=a(".inEditMode").parent().find(".articleTags input").val(),i=i.split(",");for(d in i)g=typeof i[d],"string"===g&&i[d].indexOf("http")!==-1&&b.push(i[d]);a(".imageThumbnailContainer ul").empty(),k.options.suggestions(a(".inEditMode").parent().find(".articleTags input").val(),k.options.limit,0,f),j=new VIE,j.use(new j.DBPediaService({url:"http://dev.iks-project.eu/stanbolfull",proxyDisabled:!0})),h=1,b.length===0&&a("#activitySpinner").html("No images found."),a(b).each(function(){return j.load({entity:this+""}).using("dbpedia").execute().done(function(b){return a(b).each(function(){var b,c;if(this.attributes["<http://dbpedia.org/ontology/thumbnail>"])return c=typeof this.attributes["<http://dbpedia.org/ontology/thumbnail>"],c==="string"&&(b=this.attributes["<http://dbpedia.org/ontology/thumbnail>"],b=b.substring(1,b.length-1)),c==="object"&&(b="",b=this.attributes["<http://dbpedia.org/ontology/thumbnail>"][0].value),a(".imageThumbnailContainer ul").append('<li><img id="si-'+h+'" src="'+b+'" class="imageThumbnail"></li>'),h++}),a("#activitySpinner").hide()})})}return c(),k.options.loaded=1,this.options.dialog.dialog("open")},_closeDialog:function(){return this.options.dialog.dialog("close")},_addGuiTabSuggestions:function(b,c){var d;return d=this,b.append(a('<li id="'+this.options.uuid+'-tab-suggestions" class="'+d.widgetName+"-tabselector "+d.widgetName+'-tab-suggestions"><span>Suggestions</span></li>')),c.append(a('<div id="'+this.options.uuid+'-tab-suggestions-content" class="'+d.widgetName+'-tab tab-suggestions">                <div class="imageThumbnailContainer fixed"><div id="activitySpinner">Loading Images...</div><ul><li>                    <img src="http://imagesus.homeaway.com/mda01/badf2e69babf2f6a0e4b680fc373c041c705b891" class="imageThumbnail imageThumbnailActive" />                  </li></ul><br style="clear:both"/>                </div>                <div class="activeImageContainer">                    <div class="rotationWrapper">                        <div class="hintArrow"></div>                        <img src="" id="'+this.options.uuid+'-sugg-activeImage" class="activeImage" />                    </div>                    <img src="" id="'+this.options.uuid+'-sugg-activeImageBg" class="activeImage activeImageBg" />                </div>                <div class="metadata">                    <label for="caption-sugg">Caption</label><input type="text" id="caption-sugg" />                </div>            </div>'))},_addGuiTabSearch:function(b,c){var d,e;return e=this,d=""+this.options.uuid+"-image-dialog",b.append(a('<li id="'+this.options.uuid+'-tab-search" class="'+e.widgetName+"-tabselector "+e.widgetName+'-tab-search"><span>Search</span></li>')),c.append(a('<div id="'+this.options.uuid+'-tab-search-content" class="'+e.widgetName+'-tab tab-search">                <form type="get" id="'+this.options.uuid+"-"+e.widgetName+'-searchForm">                    <input type="text" class="searchInput" /><input type="submit" id="'+this.options.uuid+"-"+e.widgetName+'-searchButton" class="button searchButton" value="OK"/>                </form>                <div class="searchResults imageThumbnailContainer"></div>                <div id="'+this.options.uuid+'-search-activeImageContainer" class="search-activeImageContainer activeImageContainer">                    <div class="rotationWrapper">                        <div class="hintArrow"></div>                        <img src="" id="'+this.options.uuid+'-search-activeImageBg" class="activeImage" />                    </div>                    <img src="" id="'+
this.options.uuid+'-search-activeImage" class="activeImage activeImageBg" />                </div>                <div class="metadata" id="metadata-search" style="display: none;">                    <label for="caption-search">Caption</label><input type="text" id="caption-search" />                    <!--<button id="'+this.options.uuid+"-"+e.widgetName+'-addimage">Add Image</button>-->                </div>            </div>')),a(".tab-search form",c).submit(function(b){var c,f;return b.preventDefault(),f=this,c=function(b){var f,g,h;return h=[],h.push('<div class="pager-prev" style="display:none"></div>'),a.each(b.assets,function(a,b){return h.push('<img src="'+b.url+'" class="imageThumbnail '+e.widgetName+'-search-imageThumbnail" /> ')}),h.push('<div class="pager-next" style="display:none"></div>'),f=a("#"+d+" .tab-search .searchResults"),f.html(h.join("")),b.offset>0&&a(".pager-prev",f).show(),b.offset<b.total&&a(".pager-next",f).show(),a(".pager-prev",f).click(function(a){return e.options.search(null,e.options.limit,b.offset-e.options.limit,c)}),a(".pager-next",f).click(function(a){return e.options.search(null,e.options.limit,b.offset+e.options.limit,c)}),a("#"+e.options.uuid+"-search-activeImageContainer").show(),g=a("."+e.widgetName+"-search-imageThumbnail").first().addClass("imageThumbnailActive"),a("#"+e.options.uuid+"-search-activeImage, #"+e.options.uuid+"-search-activeImageBg").attr("src",g.attr("src")),a("#metadata-search").show()},e.options.search(null,e.options.limit,0,c)})},_prepareIframe:function(b){var c;return b.options.iframeName=""+b.options.uuid+"-"+b.widgetName+"-postframe",c=a('<iframe name="'+b.options.iframeName+'" id="'+b.options.iframeName+'" class="hidden" src="javascript:false;" style="display:none" />'),a("#"+b.options.uuid+"-"+b.widgetName+"-iframe").append(c),c.get(0).name=b.options.iframeName},_iframeUpload:function(b){var c,d;return d=b.widget,d._prepareIframe(d),a("#"+d.options.uuid+"-"+d.widgetName+"-tags").val(a(".inEditMode").parent().find(".articleTags input").val()),c=a("#"+d.options.uuid+"-"+d.widgetName+"-uploadform"),c.attr("action",d.options.uploadUrl),c.attr("method","post"),c.attr("userfile",b.file),c.attr("enctype","multipart/form-data"),c.attr("encoding","multipart/form-data"),c.attr("target",d.options.iframeName),c.submit(),a("#"+d.options.iframeName).load(function(){return b.success(a("#"+d.options.iframeName)[0].contentWindow.location.href)})},_addGuiTabUpload:function(b,c){var d,e,f;return f=this,b.append(a('<li id="'+this.options.uuid+'-tab-upload" class="'+f.widgetName+"-tabselector "+f.widgetName+'-tab-upload"><span>Upload</span></li>')),c.append(a('<div id="'+this.options.uuid+'-tab-upload-content" class="'+f.widgetName+'-tab tab-upload">                <form id="'+this.options.uuid+"-"+f.widgetName+'-uploadform">                    <input id="'+this.options.uuid+"-"+f.widgetName+'-file" name="'+this.options.uuid+"-"+f.widgetName+'-file" type="file" class="file">                    <input id="'+this.options.uuid+"-"+f.widgetName+'-tags" name="tags" type="hidden" />                    <br />                    <input type="submit" value="Upload" id="'+this.options.uuid+"-"+f.widgetName+'-upload">                </form>                <div id="'+this.options.uuid+"-"+f.widgetName+'-iframe"></div>            </div>')),d=a('<iframe name="postframe" id="postframe" class="hidden" src="about:none" style="display:none" />'),a("#"+f.options.uuid+"-"+f.widgetName+"-upload").live("click",function(b){var c;return b.preventDefault(),c=a("#"+f.options.uuid+"-"+f.widgetName+"-file").val(),f.options.upload({widget:f,file:c,success:function(b){var c,d;return c="si"+Math.floor(Math.random()*101+400)+"ab",a(".imageThumbnailContainer ul",f.options.dialog).length===0&&(d=a("<ul></ul>"),a(".imageThumbnailContainer").append(d)),a(".imageThumbnailContainer ul",f.options.dialog).append('<li><img src="'+b+'" id="'+c+'" class="imageThumbnail"></li>'),a("#"+c).trigger("click"),a(f.options.dialog).find(".nav li").first().trigger("click")}}),!1}),e=function(){var b,c;try{if(!f.options.editable.getSelection())throw new Error("SelectionNotSet")}catch(d){f.options.editable.restoreSelection(f.lastSelection)}return document.execCommand("insertImage",null,a(this).attr("src")),b=document.getSelection().anchorNode.firstChild,a(b).attr("alt",a(".caption").value),c=function(){return f.element.trigger("hallomodified")},window.setTimeout(c,100),f._closeDialog()},this.options.dialog.find(".halloimage-activeImage, #"+f.options.uuid+"-"+f.widgetName+"-addimage").click(e)},_addDragnDrop:function(){var b,c,d,e,f,g,h,i,j;return e={delayAction:function(a,b){var c;c=clearTimeout(c);if(!c)return c=setTimeout(a,b)},calcPosition:function(a,b){var c;c=a.left+i;if(b.pageX>=c&&b.pageX<=a.left+i*2)return"middle";if(b.pageX<c)return"left";if(b.pageX>a.left+i*2)return"right"},createInsertElement:function(b,c){var d,e,f,g,h,i,j,k;h=250,g=250,j=new Image,j.src=b.src,c||(this.startPlace.parents(".tab-suggestions").length>0?d=a("#caption-sugg").val():this.startPlace.parents(".tab-search").length>0?d=a("#caption-search").val():d=a(b).attr("alt")),k=j.width,e=j.height;if(k>h||e>g)k>e?i=(j.width/h).toFixed():i=(j.height/g).toFixed(),k=(j.width/i).toFixed(),e=(j.height/i).toFixed();return f=a("<img>").attr({src:j.src,width:k,height:e,alt:d,"class":c?"tmp":""}).show(),f},createLineFeedbackElement:function(){return a("<div/>").addClass("tmpLine")},removeFeedbackElements:function(){return a(".tmp, .tmpLine",d).remove()},removeCustomHelper:function(){return a(".customHelper").remove()},showOverlay:function(a){var b;b=d.height()+parseFloat(d.css("paddingTop"))+parseFloat(d.css("paddingBottom")),g.big.css({height:b}),g.left.css({height:b}),g.right.css({height:b});switch(a){case"left":return g.big.addClass("bigOverlayLeft").removeClass("bigOverlayRight").css({left:i}).show(),g.left.hide(),g.right.hide();case"middle":return g.big.removeClass("bigOverlayLeft bigOverlayRight"),g.big.hide(),g.left.show(),g.right.show();case"right":return g.big.addClass("bigOverlayRight").removeClass("bigOverlayLeft").css({left:0}).show(),g.left.hide(),g.right.hide()}},checkOrigin:function(b){return a(b.target).parents("[contenteditable]").length!==0?!0:!1},startPlace:""},b={createTmpFeedback:function(a,b){var c;return b==="middle"?e.createLineFeedbackElement():(c=e.createInsertElement(a,!0),c.addClass("inlineImage-"+b))},handleOverEvent:function(c,h){var i;return i=function(){var i;return window.waitWithTrash=clearTimeout(window.waitWithTrash),i=e.calcPosition(f,c),a(".trashcan",h.helper).remove(),d.append(g.big),d.append(g.left),d.append(g.right),e.removeFeedbackElements(),a(c.target).prepend(b.createTmpFeedback(h.draggable[0],i)),i==="middle"?(a(c.target).prepend(b.createTmpFeedback(h.draggable[0],"right")),a(".tmp",a(c.target)).hide()):(a(c.target).prepend(b.createTmpFeedback(h.draggable[0],"middle")),a(".tmpLine",a(c.target)).hide()),e.showOverlay(i)},setTimeout(i,5)},handleDragEvent:function(c,g){var h,i,j;h=e.calcPosition(f,c);if(h===b.lastPositionDrag)return;return b.lastPositionDrag=h,i=a(".tmp",d),j=a(".tmpLine",d),h==="middle"?(j.show(),i.hide()):(j.hide(),i.removeClass("inlineImage-left inlineImage-right").addClass("inlineImage-"+h).show()),e.showOverlay(h)},handleLeaveEvent:function(b,c){var d;return d=function(){return a("div.trashcan",c.helper).length||a(c.helper).append(a('<div class="trashcan"></div>')),a(".bigOverlay, .smallOverlay").remove()},window.waitWithTrash=setTimeout(d,200),e.removeFeedbackElements()},handleStartEvent:function(b,c){var d;return d=e.checkOrigin(b),d&&a(b.target).remove(),a(document).trigger("startPreventSave"),e.startPlace=a(b.target)},handleStopEvent:function(b,c){var f;return f=e.checkOrigin(b),f?a(b.target).remove():d.trigger("change"),g.big.hide(),g.left.hide(),g.right.hide(),a(document).trigger("stopPreventSave")},handleDropEvent:function(c,h){var i,j,k;return j=e.checkOrigin(c),k=e.calcPosition(f,c),e.removeFeedbackElements(),e.removeCustomHelper(),i=e.createInsertElement(h.draggable[0],!1),k==="middle"?(i.show(),i.removeClass("inlineImage-middle inlineImage-left inlineImage-right").addClass("inlineImage-"+k).css({position:"relative",left:(d.width()+parseFloat(d.css("paddingLeft"))+parseFloat(d.css("paddingRight"))-i.attr("width"))/2}),i.insertBefore(a(c.target))):(i.removeClass("inlineImage-middle inlineImage-left inlineImage-right").addClass("inlineImage-"+k).css("display","block"),a(c.target).prepend(i)),g.big.hide(),g.left.hide(),g.right.hide(),d.trigger("change"),b.init(d)},createHelper:function(b){return a("<div>").css({backgroundImage:"url("+a(b.currentTarget).attr("src")+")"}).addClass("customHelper").appendTo("body")},init:function(){var e,f;return e=[],f=function(e){return e.jquery_draggable_initialized||(e.jquery_draggable_initialized=!0,a(e).draggable({cursor:"move",helper:b.createHelper,drag:b.handleDragEvent,start:b.handleStartEvent,stop:b.handleStopEvent,disabled:!d.hasClass("inEditMode"),cursorAt:{top:50,left:50}})),c.push(e)},a(".rotationWrapper img",j.dialog).each(function(a,b){if(!b.jquery_draggable_initialized)return f(b)}),a("img",d).each(function(a,b){b.contentEditable=!1;if(!b.jquery_draggable_initialized)return f(b)}),a("p",d).each(function(c,e){if(!e.jquery_droppable_initialized)return e.jquery_droppable_initialized=!0,a("p",d).droppable({tolerance:"pointer",drop:b.handleDropEvent,over:b.handleOverEvent,out:b.handleLeaveEvent})})},enableDragging:function(){return a.each(c,function(b,c){return a(c).draggable("option","disabled",!1)})},disableDragging:function(){return a.each(c,function(b,c){return a(c).draggable("option","disabled",!0)})}},c=[],d=a(this.options.editable.element),j=this.options,f=d.offset(),i=parseFloat(d.width()/3),h={width:i,height:d.height()},g={big:a("<div/>").addClass("bigOverlay").css({width:i*2,height:d.height()}),left:a("<div/>").addClass("smallOverlay smallOverlayLeft").css(h),right:a("<div/>").addClass("smallOverlay smallOverlayRight").css(h).css("left",i*2)},b.init(),d.bind("halloactivated",b.enableDragging),d.bind("hallodeactivated",b.disableDragging)}})}(jQuery),function(a){return a.widget("IKS.hallojustify",{options:{editable:null,toolbar:null,uuid:""},_create:function(){var b,c,d,e=this;return d=this,c=a('<span class="'+d.widgetName+'"></span>'),b=function(b){var f,g,h,i;return h=""+e.options.uuid+"-"+b,c.append(a('<input id="'+h+'" type="checkbox" /><label for="'+h+'" class="'+b+'_button" >'+b+"</label>").button()),f=a("#"+h,c),f.attr("hallo-command","justify"+b),f.bind("change",function(b){var c;return c=a(this).attr("hallo-command"),d.options.editable.execute(c)}),i=function(a){return document.queryCommandState("justify"+b)?(f.attr("checked",!0),f.next("label").addClass("ui-state-clicked"),f.button("refresh")):(f.attr("checked",!1),f.next("label").removeClass("ui-state-clicked"),f.button("refresh"))},g=e.element,g.bind("halloenabled",function(){return g.bind("keyup paste change mouseup",i)}),g.bind("hallodisabled",function(){return g.unbind("keyup paste change mouseup",i)})},b("Left"),b("Center"),b("Right"),c.buttonset(),this.options.toolbar.append(c)},_init:function(){}})}(jQuery),function(a){return a.widget("IKS.hallolink",{options:{editable:null,toolbar:null,uuid:"",link:!0,image:!0,defaultUrl:"http://",dialogOpts:{autoOpen:!1,width:540,height:95,title:"Enter Link",modal:!0,resizable:!1,draggable:!1,dialogClass:"hallolink-dialog"}},_create:function(){var b,c,d,e,f,g,h,i=this;h=this,e=""+this.options.uuid+"-dialog",d=a('<div id="'+e+'"><form action="#" method="post" class="linkForm"><input class="url" type="text" name="url" value="'+this.options.defaultUrl+'" /><input type="submit" id="addlinkButton" value="Insert" /></form></div>'),g=a("input[name=url]",d).focus(function(a){return this.select()}),f=function(){var a;return a=g.val(),h.options.editable.restoreSelection(h.lastSelection),(new RegExp(/^\s*$/)).test(a)||a===h.options.defaultUrl?(h.lastSelection.collapsed&&(h.lastSelection.setStartBefore(h.lastSelection.startContainer),h.lastSelection.setEndAfter(h.lastSelection.startContainer),window.getSelection().addRange(h.lastSelection)),document.execCommand("unlink",null,"")):h.lastSelection.startContainer.parentNode.href===void 0?document.execCommand("createLink",null,a):h.lastSelection.startContainer.parentNode.href=a,h.options.editable.element.trigger("change"),h.options.editable.removeAllSelections(),d.dialog("close"),!1},d.find("form").submit(f),c=a('<span class="'+h.widgetName+'"></span>'),b=function(b){var e,f;return f=""+i.options.uuid+"-"+b,c.append(a('<input id="'+f+'" type="checkbox" /><label for="'+f+'" class="anchor_button" >'+b+"</label>").button()),e=a("#"+f,c),e.bind("change",function(b){return h.lastSelection=h.options.editable.getSelection(),g=a("input[name=url]",d),h.lastSelection.startContainer.parentNode.href===void 0?g.val(h.options.defaultUrl):(g.val(a(h.lastSelection.startContainer.parentNode).attr("href")),a(g[0].form).find("input[type=submit]").val("update")),d.dialog("open")}),i.element.bind("keyup paste change mouseup",function(b){var c,d;return d=a(h.options.editable.getSelection().startContainer),c=d.prop("nodeName")?d.prop("nodeName"):d.parent().prop("nodeName"),c&&c.toUpperCase()==="A"?(e.attr("checked",!0),e.next().addClass("ui-state-clicked"),e.button("refresh")):(e.attr("checked",!1),e.next().removeClass("ui-state-clicked"),e.button("refresh"))})},this.options.link&&b("A");if(this.options.link)return c.buttonset(),this.options.toolbar.append(c),d.dialog(this.options.dialogOpts)},_init:function(){}})}(jQuery),function(a){return a.widget("IKS.hallolists",{options:{editable:null,toolbar:null,uuid:"",lists:{ordered:!0,unordered:!0}},_create:function(){var b,c,d,e=this;return d=this,c=a('<span class="'+d.widgetName+'"></span>'),b=function(b,f){var g,h,i,j;return i=""+e.options.uuid+"-"+b,c.append(a('<input id="'+i+'" type="checkbox" /><label for="'+i+'" class="'+b+'_button">'+f+"</label>").button()),g=a("#"+i,c),g.attr("hallo-command","insert"+b+"List"),g.bind("change",function(b){var c;return c=a(this).attr("hallo-command"),d.options.editable.execute(c)}),j=function(a){return document.queryCommandState("insert"+b+"List")?(g.attr("checked",!0),g.next("label").addClass("ui-state-clicked"),g.button("refresh")):(g.attr("checked",!1),g.next("label").removeClass("ui-state-clicked"),g.button("refresh"))},h=e.element,h.bind("halloenabled",function(){return h.bind("keyup paste change mouseup",j)}),h.bind("hallodisabled",function(){return h.unbind("keyup paste change mouseup",j)})},this.options.lists.ordered&&b("Ordered","OL"),this.options.lists.unordered&&b("Unordered","UL"),c.buttonset(),this.options.toolbar.append(c)},_init:function(){}})}(jQuery),function(a){return a.widget("Liip.hallooverlay",{options:{editable:null,toolbar:null,uuid:"",overlay:null,padding:10,background:null},_create:function(){var b;b=this;if(!this.options.bound)return this.options.bound=!0,b.options.editable.element.bind("halloactivated",function(c,d){b.options.currentEditable=a(c.target);if(!b.options.visible)return b.showOverlay()}),b.options.editable.element.bind("hallomodified",function(c,d){b.options.currentEditable=a(c.target);if(b.options.visible)return b.resizeOverlay()}),b.options.editable.element.bind("hallodeactivated",function(c,d){b.options.currentEditable=a(c.target);if(b.options.visible)return b.hideOverlay()})},_init:function(){},showOverlay:function(){return this.options.visible=!0,this.options.overlay===null&&(a("#halloOverlay").length>0?this.options.overlay=a("#halloOverlay"):(this.options.overlay=a('<div id="halloOverlay" class="halloOverlay">'),a(document.body).append(this.options.overlay)),this.options.overlay.bind("click",a.proxy(this.options.editable.turnOff,this.options.editable))),this.options.overlay.show(),this.options.background===null&&(a("#halloBackground").length>0?this.options.background=a("#halloBackground"):(this.options.background=a('<div id="halloBackground" class="halloBackground">'),a(document.body).append(this.options.background))),this.resizeOverlay(),this.options.background.show(),this.options.originalZIndex||(this.options.originalZIndex=this.options.currentEditable.css("z-index")),this.options.currentEditable.css("z-index","350")},resizeOverlay:function(){var a;return a=this.options.currentEditable.offset(),this.options.background.css({top:a.top-this.options.padding,left:a.left-this.options.padding}),this.options.background.width(this.options.currentEditable.width()+2*this.options.padding),this.options.background.height(this.options.currentEditable.height()+2*this.options.padding)},hideOverlay:function(){return this.options.visible=!1,this.options.overlay.hide(),this.options.background.hide(),this.options.currentEditable.css("z-index",this.options.originalZIndex)},_findBackgroundColor:function(a){var b;return b=a.css("background-color"),b!=="rgba(0, 0, 0, 0)"&&b!=="transparent"?b:a.is("body")?"white":this._findBackgroundColor(a.parent())}})}(jQuery),function(a){return a.widget("IKS.halloreundo",{options:{editable:null,toolbar:null,uuid:""},_create:function(){var b,c,d,e=this;return d=this,c=a('<span class="'+d.widgetName+'"></span>'),b=function(b,f){var g,h;return h=""+e.options.uuid+"-"+b,c.append(a('<input id="'+h+'" type="checkbox" /><label for="'+h+'">'+f+"</label>").button()),g=a("#"+h,c),g.attr("hallo-command",b),g.bind("change",function(c){return b=a(this).attr("hallo-command"),d.options.editable.execute(b)})},b("undo","Undo"),b("redo","Redo"),c.buttonset(),this.options.toolbar.append(c)},_init:function(){}})}(jQuery),function(a){return a.widget("Liip.hallotoolbarlinebreak",{options:{editable:null,toolbar:null,uuid:"",breakAfter:[]},_create:function(){var b,c,d,e,f,g,h,i,j,k;c=a(".ui-buttonset",this.options.toolbar),d=a(),f=0,k=this.options.breakAfter;for(g=0,i=k.length;g<i;g++){e=k[g],f++;for(h=0,j=c.length;h<j;h++){b=c[h],d=a(d).add(a(b));if(a(b).hasClass(e)){d.wrapAll('<div class="halloButtonrow halloButtonrow-'+f+'" />'),c=c.not(d),d=a();break}}}if(c.length>0)return f++,c.wrapAll('<div class="halloButtonrow halloButtonrow-'+f+'" />')},_init:function(){}})}(jQuery)}.call(this);