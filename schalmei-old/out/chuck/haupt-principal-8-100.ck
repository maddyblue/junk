100 => int peaks;
5 => int recs;
3 => int degs;

[ [ -0.0000000000616178958619253, 0.0000001492789310898046142, -0.0000240156306442158679027, 0.0885035163421134252192957], [0.0000000000949729258525033, -0.0000003126014686457403962, 0.0002632889966212613517930, 0.0124079917442137584865369], [0.0000000000060950280641362, 0.0000000030621447851711483, -0.0000329625248055696347524, 0.0255824418408956560933021], [0.0000000000127463608100753, -0.0000000357299336423587760, 0.0000233638038938011765623, 0.0011140772774759803362410], [0.0000000000032050193088961, -0.0000000093509873836795393, 0.0000073970456355791597514, -0.0006254742946184041040708], [0.0000000000006836180515832, -0.0000000013005522195472809, 0.0000009366022346687065846, -0.0000042482559407623714695], [0.0000000000007873698584781, -0.0000000018169938538809699, 0.0000012622402455623427856, -0.0000556513359606678340908], [0.0000000000005311705964821, -0.0000000009895138844284904, 0.0000005608819245475522412, 0.0000333470514816261497191], [0.0000000000002055905425807, -0.0000000003700169907233501, 0.0000002569456121298672491, 0.0000409230543169086040628], [0.0000000000001503111356896, -0.0000000002285088110648835, 0.0000001352355694180417083, 0.0000561774977353711490232], [0.0000000000001028824280481, -0.0000000000854622555140756, 0.0000000093740154362395850, 0.0000737492539735333811537], [0.0000000000000683212588523, -0.0000000000353700454771059, -0.0000000111069955726266232, 0.0000694874946981264104322], [0.0000000000000367746781651, 0.0000000000619780981480209, -0.0000000873285161426275421, 0.0000754826092679117635099], [0.0000000000000230562605017, 0.0000000000896623382756583, -0.0000001033814184342214732, 0.0000739425734877388152015], [0.0000000000000044645108713, 0.0000000001188753274561473, -0.0000001185309715964091116, 0.0000745655246017308727001], [0.0000000000000128456202605, 0.0000000000910105707100318, -0.0000001003411564349716629, 0.0000712467251851367689873], [0.0000000000000465763673271, -0.0000000000114426312347588, -0.0000000429279948262904310, 0.0000626862167748895858814], [0.0000000000000606005271863, -0.0000000000522647113373791, -0.0000000268735808033850100, 0.0000601293036288708180985], [0.0000000000000423885029313, -0.0000000000020505661243154, -0.0000000665622848813386637, 0.0000646496542192518216423], [-0.0000000000000028124513638, 0.0000000001227049477201083, -0.0000001633408135320879557, 0.0000771219314865333286117], [0.0000000000000354935282879, -0.0000000000149208168659570, -0.0000000304986046487806311, 0.0000425041697419187611924], [0.0000000000000305989062511, -0.0000000000174687501507213, -0.0000000202269547843943628, 0.0000387508524255595888887], [0.0000000000000464964512979, -0.0000000000751218164582606, 0.0000000290910808181900340, 0.0000270795761063358369504], [0.0000000000000428132435872, -0.0000000000698957955462162, 0.0000000274467742016251998, 0.0000268344340384161982277], [0.0000000000000456444228148, -0.0000000000814399753345343, 0.0000000404383515319345176, 0.0000223642525268214934853], [0.0000000000000448079127924, -0.0000000000874471453212475, 0.0000000523389526239373143, 0.0000171786794738315804474], [0.0000000000000488217366307, -0.0000000001047521454572113, 0.0000000655712920574901899, 0.0000142005971920785284407], [0.0000000000000506756943909, -0.0000000001103103401708867, 0.0000000684570887798581031, 0.0000131285571039684160523], [0.0000000000000423602266454, -0.0000000000892712150020645, 0.0000000535071021008522525, 0.0000144905690387138526179], [0.0000000000000431569375978, -0.0000000000925220103711718, 0.0000000575492486286442765, 0.0000128465315996333440183], [0.0000000000000422044387954, -0.0000000000906986756926399, 0.0000000564282608633237310, 0.0000127939776119838237082], [0.0000000000000398678595608, -0.0000000000827986258335448, 0.0000000470614544329262548, 0.0000141862608901494117704], [0.0000000000000391570536857, -0.0000000000826937604566367, 0.0000000480430549537462536, 0.0000136450874157248651754], [0.0000000000000358522372345, -0.0000000000731338263878359, 0.0000000409499924406043279, 0.0000142717357271530332139], [0.0000000000000334395842052, -0.0000000000683666929915990, 0.0000000393172399843333425, 0.0000134400057587641846472], [0.0000000000000356290992084, -0.0000000000747355446764548, 0.0000000423382095921451117, 0.0000126304932330019718307], [0.0000000000000314264362410, -0.0000000000644086214979302, 0.0000000348179772818101218, 0.0000135481274782136859543], [0.0000000000000306050691640, -0.0000000000628694255027160, 0.0000000342622233990120827, 0.0000129641516202571479275], [0.0000000000000304711543439, -0.0000000000633940698211663, 0.0000000352816219261207241, 0.0000124241805731818919916], [0.0000000000000289534247603, -0.0000000000600115684704097, 0.0000000334441771486745764, 0.0000123479308543135862943], [0.0000000000000271825056722, -0.0000000000544123225330169, 0.0000000290651998938281127, 0.0000126120806243390079293], [0.0000000000000280804481699, -0.0000000000568109217690162, 0.0000000302296249689152239, 0.0000118876142010396086002], [0.0000000000000309586961464, -0.0000000000655589036940485, 0.0000000358290264378281254, 0.0000107852797649272949998], [0.0000000000000306355161519, -0.0000000000649711175005279, 0.0000000355302733198715689, 0.0000107095077122854777786], [0.0000000000000294769958050, -0.0000000000627729617612830, 0.0000000346796775747269721, 0.0000105227237018297513187], [0.0000000000000264944921521, -0.0000000000539144186334892, 0.0000000276137915885131857, 0.0000112120843636452441892], [0.0000000000000277334773353, -0.0000000000591480939358796, 0.0000000332425305180356603, 0.0000096406058886426166261], [0.0000000000000268444214922, -0.0000000000564577237277597, 0.0000000311302480461390173, 0.0000098649262773141472758], [0.0000000000000284340400860, -0.0000000000612172416277876, 0.0000000342174552849755703, 0.0000091158290615848935055], [0.0000000000000267708523996, -0.0000000000575815849273282, 0.0000000315675390127576567, 0.0000091990282419852778209], [0.0000000000000261560468556, -0.0000000000562695392412846, 0.0000000307167025390060285, 0.0000092045843270764018810], [0.0000000000000269197593388, -0.0000000000591249190889503, 0.0000000335435174203790246, 0.0000082163476530144295966], [0.0000000000000271022043227, -0.0000000000594187688124876, 0.0000000333244001451340162, 0.0000078992001114798075155], [0.0000000000000247671248111, -0.0000000000516122452890462, 0.0000000268818324536895787, 0.0000086157285083081760151], [0.0000000000000246309345222, -0.0000000000515382570779304, 0.0000000269599865623641625, 0.0000084380122213204280190], [0.0000000000000250399161860, -0.0000000000534299388023807, 0.0000000287548215199275281, 0.0000079070473351838249242], [0.0000000000000263250099550, -0.0000000000592017629994778, 0.0000000356912895856722373, 0.0000054288943861752032445], [0.0000000000000259078271026, -0.0000000000586218676928299, 0.0000000354741262933979302, 0.0000053269907395151124571], [0.0000000000000263635386562, -0.0000000000610570312771446, 0.0000000376177881354944657, 0.0000048379046645831490052], [0.0000000000000263789424707, -0.0000000000614630551048146, 0.0000000381890546570217083, 0.0000045231054236705509078], [0.0000000000000252892714443, -0.0000000000578744548520816, 0.0000000352906637764938003, 0.0000047406657759304972761], [0.0000000000000256644138152, -0.0000000000596271373354768, 0.0000000371821400521797508, 0.0000041236855084804340763], [0.0000000000000269640517891, -0.0000000000653348333727691, 0.0000000429420584037791372, 0.0000026085242812377295168], [0.0000000000000267412136152, -0.0000000000652036080572391, 0.0000000434707845263180930, 0.0000021123812960011335513], [0.0000000000000265280627395, -0.0000000000651892800042527, 0.0000000440163529779527368, 0.0000017802437295233575566], [0.0000000000000264027934023, -0.0000000000651607059552163, 0.0000000438639372526378514, 0.0000015778333444587903087], [0.0000000000000263256310864, -0.0000000000659634689519094, 0.0000000449799340982877265, 0.0000011759331271673428298], [0.0000000000000259302184928, -0.0000000000654147634471098, 0.0000000449563320243639455, 0.0000008496866519524600230], [0.0000000000000262394178268, -0.0000000000666335263471686, 0.0000000463269871812616768, 0.0000003454396046215248191], [0.0000000000000269066346926, -0.0000000000689532130397324, 0.0000000483970921916646262, -0.0000002183584659294014965], [0.0000000000000269117549162, -0.0000000000692835487621846, 0.0000000489474362097404007, -0.0000004752213404233874401], [0.0000000000000270366592516, -0.0000000000703557383182643, 0.0000000505144892260997605, -0.0000010736850794712126516], [0.0000000000000272143447758, -0.0000000000709066843661870, 0.0000000508356900835827891, -0.0000011728685134199041418], [0.0000000000000272446880447, -0.0000000000709558754456132, 0.0000000507160697614429425, -0.0000012100512865804074819], [0.0000000000000274315125373, -0.0000000000716280510081310, 0.0000000510489905777951336, -0.0000013219432896118133903], [0.0000000000000272668016510, -0.0000000000711602770315396, 0.0000000506917445461953318, -0.0000012949260172653668659], [0.0000000000000271192991705, -0.0000000000709625562964087, 0.0000000504048751795013927, -0.0000012748762305783232069], [0.0000000000000258596675443, -0.0000000000678962175937675, 0.0000000483382184911315164, -0.0000010728988216352986293], [0.0000000000000247305539501, -0.0000000000646513923655538, 0.0000000457964839919815070, -0.0000007174709259774870313], [0.0000000000000240514974114, -0.0000000000629823797383125, 0.0000000447448425137037084, -0.0000006816697959431262804], [0.0000000000000240420526737, -0.0000000000631507432303279, 0.0000000450160185589476352, -0.0000008821418089220614619], [0.0000000000000239785455682, -0.0000000000634218474779925, 0.0000000456143807866167699, -0.0000011776921812862506319], [0.0000000000000236094777784, -0.0000000000628891544425756, 0.0000000455391333621295221, -0.0000013016990151240631057], [0.0000000000000235104433901, -0.0000000000629179788899479, 0.0000000456829711621291803, -0.0000013674989828460151803], [0.0000000000000229841675479, -0.0000000000611196379379562, 0.0000000441087052145537665, -0.0000011506616568019242937], [0.0000000000000223439766335, -0.0000000000591955335846455, 0.0000000428046077373138800, -0.0000012356877545790610790], [0.0000000000000227444773763, -0.0000000000607011295247189, 0.0000000441102861152626762, -0.0000016504552404096460593], [0.0000000000000228757185061, -0.0000000000614806360809059, 0.0000000449828715752368779, -0.0000019092717379821744575], [0.0000000000000227136012397, -0.0000000000610713249239691, 0.0000000447809044868354074, -0.0000020498942386577923553], [0.0000000000000227324885508, -0.0000000000611256974796963, 0.0000000447153331244957419, -0.0000020489394936217378430], [0.0000000000000222093209976, -0.0000000000597274679490456, 0.0000000438464255252554943, -0.0000021248758214441921647], [0.0000000000000216133989708, -0.0000000000582368226948343, 0.0000000428193422413157867, -0.0000020409012330589068439], [0.0000000000000217327751297, -0.0000000000586826070257067, 0.0000000431391212180681382, -0.0000021307071199776524992], [0.0000000000000210105143217, -0.0000000000565615084205395, 0.0000000415129067646640413, -0.0000019631453556629618729], [0.0000000000000205309858474, -0.0000000000551672996997654, 0.0000000405724749959606158, -0.0000019850019909852304680], [0.0000000000000195890780860, -0.0000000000532568443724854, 0.0000000395033377585063688, -0.0000020036546607959842186], [0.0000000000000192235736548, -0.0000000000521694980782800, 0.0000000386664248876476607, -0.0000019574955294817144990], [0.0000000000000188936984395, -0.0000000000510632337703623, 0.0000000377911386982775654, -0.0000019834623928565193944], [0.0000000000000186790948047, -0.0000000000503570798168951, 0.0000000372412551242213399, -0.0000019458755446268735071], [0.0000000000000184737070242, -0.0000000000497366066886059, 0.0000000367962917185617769, -0.0000019565588961810672788 ] ] @=> float percs[][];

[ [    1.00000,    0.49939,    0.50000,    1.00000,    0.49931], [   1.50122,    1.00000,    1.00000,    0.49985,    0.99847], [   0.50122,    1.49939,    1.49939,    1.99969,    1.49763], [   2.00000,    2.00000,    1.99939,    0.99326,    1.99694], [   3.00244,    1.04162,    2.99939,    0.99204,    3.49473], [   2.50122,    0.54957,    4.49878,    1.49985,    2.49625], [   0.59169,    0.43819,    3.99878,    0.98959,    0.50023], [   0.84597,    0.07956,    0.98409,    1.01011,    2.99541], [   1.09535,    2.49939,    0.98103,    0.49311,    0.49778], [   1.59658,    0.41738,    1.01958,    1.01164,    3.99388], [   0.63814,    0.57895,    0.97858,    0.98683,    1.00000], [   0.82152,    0.58384,    0.97491,    1.01470,    0.00963], [   1.11002,    0.59241,    4.99878,    1.01378,    0.00336], [   0.80196,    2.02326,    2.49939,    0.98469,    0.50191], [   0.67971,    2.99878,    0.97124,    3.49985,    4.49320], [   0.78729,    0.59731,    1.02754,    4.99969,    1.00092], [   0.74083,    0.10771,    1.51224,    0.98101,    1.99587], [   0.76528,    1.53611,    3.49939,    1.01991,    0.00719], [   0.70660,    0.38556,    0.46389,    2.99969,    0.01544], [   2.05379,    3.99878,    5.99878,    0.97795,    1.49931], [   0.07090,    0.11506,    0.54651,    0.51363,    0.99541], [   4.50367,    1.08323,    7.49816,    1.02297,    0.00550], [   1.95355,    1.07711,    0.96206,    0.48484,    1.50023], [   1.66748,    2.02938,    0.96328,    0.01164,    0.00642], [   1.68460,    1.08813,    0.54957,    1.02634,    0.50329], [   1.93399,    0.37699,    0.95165,    0.97305,    0.00841], [   2.07335,    0.05386,    0.95471,    0.51608,    0.01911], [   3.04890,    0.27417,    0.55324,    2.49985,    0.49610], [   1.18337,    0.35373,    1.03550,    4.49985,    0.49534], [   1.91443,    0.88372,    1.53366,    0.96907,    0.49411], [   1.73594,    0.27907,    1.52387,    1.03063,    0.01835], [   0.14914,    0.63770,    0.02081,    3.99969,    1.00214], [   1.17115,    0.39780,    5.49878,    0.48086,    0.50451], [   4.00244,    0.62913,    1.04100,    0.96753,    3.49350], [   1.19804,    0.87515,    0.56120,    1.03185,    0.01636], [   3.03423,    0.87026,    0.94370,    0.47933,    0.01085], [   1.75550,    1.55202,    1.04712,    0.96508,    1.49488], [   1.76528,    0.62179,    2.02326,    1.03430,    0.02140], [   1.86553,    0.28641,    0.94064,    0.01838,    1.99862], [   1.88020,    1.96818,    6.99816,    0.02236,    0.04862], [   1.33496,    0.03305,    0.56854,    1.03767,    0.00214], [   1.28851,    0.61444,    0.02815,    0.96325,    5.49167], [   0.40587,    0.84823,    0.43574,    5.49954,    0.01162], [   5.00489,    0.36475,    1.48103,    1.04165,    2.99434], [   1.82152,    0.85924,    6.49816,    0.96110,    0.01743], [   1.80196,    1.10649,    0.57711,    0.00735,    0.03898], [   1.85086,    0.65239,    0.94676,    0.00919,    0.02354], [   3.06846,    2.03550,    8.49755,    0.95957,    0.99388], [   0.17359,    0.67564,    0.57344,    1.04410,    0.00474], [   1.30807,    0.06487,    1.52999,    0.47504,    1.99939], [   1.22494,    0.83109,   10.49755,    0.47596,    0.02828], [   1.25917,    0.66707,    1.05263,    0.95559,    0.04953], [   2.11736,    0.12485,    1.52020,    1.04655,    1.00336], [   1.23716,    0.75398,    0.42901,    1.04717,    0.50696], [   0.22249,    0.83966,    1.05692,    1.05054,    1.00581], [   0.04890,    0.79682,    0.05141,    0.95283,    0.05519], [   0.20782,    0.79070,    0.58446,    1.04870,    0.02263], [   3.11736,    0.33293,    2.01652,    0.47259,    4.99236], [   2.09535,    1.56059,    1.53856,    0.01654,    1.00413], [   0.39120,    0.81763,    0.93452,    1.05329,    0.50604], [   6.00489,    0.20563,    0.92595,    0.95069,    1.50283], [   2.14670,    0.81151,    0.92778,    0.02726,    0.03302], [   3.10269,    0.02326,    0.59058,    0.47075,    0.04678], [   0.27384,    0.23623,    2.01346,    1.05482,    0.49259], [   0.24450,    0.80539,    2.01958,    0.94579,    0.06513], [   0.19071,    0.22889,    0.92289,    1.05789,    0.05641], [   2.18826,    0.78091,   10.99755,    1.05666,    0.05198], [   2.16870,    1.12240,    1.54774,    0.46861,    4.49259], [   2.20538,    0.69645,    0.93146,    1.50352,    1.49350], [   2.22494,    0.04406,    1.54100,    0.94303,    0.51017], [   2.27873,    1.12852,    0.59792,    0.94089,    1.00505], [   2.43276,    0.19706,    8.99755,    0.02542,    1.50161], [   3.14914,    0.29498,    1.06242,    0.53599,    0.99266], [   0.11736,    0.71603,    0.59976,    0.01409,    3.49717], [   2.25183,    0.71236,    1.52693,    1.06340,    2.49717], [   0.29584,    0.70502,    0.59547,    1.06156,    0.05030], [   2.30562,    0.22032,    0.90942,    1.99541,    0.04571], [   2.31785,    0.16891,    0.91677,    0.03185,    0.02049], [   2.33496,    0.32191,    0.60588,    0.93783,    0.04464], [   0.33741,    0.77234,    0.61322,    0.93936,    0.06146], [   2.36186,    0.16401,    0.01775,    0.53905,    0.06176], [   3.67726,    0.31579,    1.07038,    0.93629,    0.05947], [   2.41809,    0.21542,    1.47368,    1.06554,    1.49228], [   3.16870,    0.31089,    0.61077,    1.06738,    0.05993], [   2.94377,    0.18237,    0.40820,    0.02848,    1.99404], [   4.54523,    0.15789,    0.41248,    0.93384,    0.03409], [   0.30562,    1.57895,    0.90147,    0.93201,    0.01391], [   0.00000,    4.49939,    7.99816,    0.54242,    0.50848], [   3.72127,    1.13709,    0.62056,    0.92833,    0.49182], [   3.22005,    1.42840,    1.08017,    0.00459,    0.99144], [   3.63325,    0.17625,    0.62362,    1.07044,    0.03195], [   2.91443,    1.14688,    0.90575,    0.03828,    0.50527], [   3.23961,    0.09914,    0.89412,    1.07412,    0.50940], [   3.18826,    0.30355,    1.08813,    0.92619,    1.50099], [   3.34230,    1.94614,    2.04100,    1.07351,    0.05137], [   0.02445,    1.59486,    0.62913,    0.45789,    0.03486], [   3.25672,    1.57038,    0.01163,    0.54885,    0.03807], [   0.10513,    1.60098,    0.63341,    1.07994,    3.49641], [   0.31785,    1.16034,    0.07956,    1.07871,    0.99052], [   3.50856,    0.08935,    0.88862,    0.92404,    2.49885 ] ] @=> float harms[][];

[ 137.610626, 274.884796, 549.769592, 1098.529816, 2200.760651 ] @=> float bases[];

fun float[] proc_harm(float freq)
{
	float ret[peaks];
	int i;
	0 => int idx;

	for(0 => i; i < recs; i++)
	{
		if(bases[i] < freq)
			i => idx;
	}

	for(0 => i; i < peaks; i++)
	{
		harms[i][idx] => ret[i];
	}

	return ret;
}

fun float[] proc_perc(float freq)
{
	float ret[peaks];
	int i;
	int j;

	for(0 => i; i < peaks; i++)
	{
		0 => ret[i];

		for(0 => j; j <= degs; j++)
		{
			percs[i][j] * Math.pow(freq, degs - j) +=> ret[i];
		}
	}

	return ret;
}

me.arg(0) => string freqstr;
if(freqstr.length() == 0) "440" => freqstr;
Std.atoi(freqstr) => float freq;

proc_harm(freq) @=> float harm[];
proc_perc(freq) @=> float perc[];

Pan2 p => dac;
SinOsc s[peaks];
for(0 => int i; i < peaks; i++)
{
	s[i] => p;
	harm[i] * freq => s[i].freq;
	perc[i] => s[i].gain;
	//<<< harm[i] * freq, "Hz,", perc[i], "gain" >>>;
}

while(true) 1::second => now;
